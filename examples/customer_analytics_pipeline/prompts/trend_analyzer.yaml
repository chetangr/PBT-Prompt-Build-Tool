name: trend_analyzer
version: 1.2.0
description: Analyzes trends in topics over time
depends_on:
  - ref('topic_extractor')
variables:
  - topic_data
  - time_window
  - trend_sensitivity
template: |
  Analyze trends in customer feedback topics:
  
  Topic Data: {{ topic_data }}
  Time Window: {{ time_window }}
  Trend Sensitivity: {{ trend_sensitivity }}
  
  Perform trend analysis:
  1. Calculate topic frequency over time
  2. Identify rising trends (increasing mentions)
  3. Identify declining trends (decreasing mentions)
  4. Detect sudden spikes or anomalies
  5. Find seasonal patterns if applicable
  6. Predict near-term trend direction
  
  Return trend analysis with statistical confidence.
model_config:
  temperature: 0.3
  max_tokens: 1800
examples:
  - input:
      topic_data: '[{"topic": "slow_loading", "count": 45, "week": 1}, {"topic": "slow_loading", "count": 78, "week": 2}]'
      time_window: "2 weeks"
      trend_sensitivity: "medium"
    output: |
      {
        "trends": [
          {
            "topic": "slow_loading",
            "trend_direction": "rising",
            "change_rate": "+73%",
            "significance": "high",
            "predicted_next_period": 95,
            "confidence": 0.82,
            "alert_level": "warning"
          }
        ],
        "summary": "Performance issues are increasingly mentioned"
      }
tags:
  - analytics
  - trend-analysis
  - time-series
config:
  materialized: incremental
  unique_key: ["topic", "time_period"]